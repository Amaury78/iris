%YAML:1.0
#==============#
# Camera Model #
#==============#
Camera.name: "Intel Realsense D435i"
Camera.setup: "monocular"
Camera.model: "perspective"

Camera.fps: 30.0
Camera.cols: 640
Camera.rows: 480
Camera.fx: 610
Camera.fy: 610
Camera.cx: 320
Camera.cy: 240

Camera.k1: 0.0
Camera.k2: 0.0
Camera.p1: 0.0
Camera.p2: 0.0
Camera.k3: 0.0
Camera.color_order: "RGB"

#================#
# ORB Parameters #
#================#
Feature.max_num_keypoints: 2000
Feature.scale_factor: 1.2
Feature.num_levels: 8
Feature.ini_fast_threshold: 20
Feature.min_fast_threshold: 7
Feature.mask_rectangles:
  - [0.0, 1.0, 0.0, 0.1]
  - [0.0, 1.0, 0.84, 1.0]
  - [0.0, 0.2, 0.7, 1.0]
  - [0.8, 1.0, 0.7, 1.0]

#=================#
# VLLM parameters #
#=================#
VLLM.t_init:  !!opencv-matrix
    rows: 3
    cols: 1
    dt: f
    data: [ 1.0, -1.0, 0.0]
# normal vector of camera
VLLM.normal_init:  !!opencv-matrix
    rows: 3
    cols: 1
    dt: f
    data: [ 1,0.9,0]
# up vector of camera
VLLM.up_init:  !!opencv-matrix
    rows: 3
    cols: 1
    dt: f
    data: [ 0,0,1]
VLLM.s_init: 3.0

VLLM.vocab_file: "orb_vocab.dbow2"
VLLM.pcd_file:   "../../vllm-data/asano-050.pcd"
VLLM.video_file: "../../vllm-data/asano3/asano3.mp4"
IMU.topic_file:  "../../vllm-data/asano3/topic.csv"
IMU.imu_file:    "../../vllm-data/asano3/imu.csv"

VLLM.iteration: 5
VLLM.frame_skip: 4
VLLM.recollection: 50

VLLM.scale_gain: 50.0
VLLM.smooth_gain: 0 # TODO
VLLM.latitude_gain: 5.0
VLLM.altitude_gain: 1.0

VLLM.distance_min: 1.5
VLLM.distance_max: 3.0

VLLM.converge_translation: 0.050
VLLM.converge_rotation: 0.01

# Map Parameter
Map.voxel_grid_leaf: 0.3
Map.submap_grid_leaf: 80
Map.normal_search_leaf: 0.5

# Kalman Filter
KF.initial_cov_p: 0.5
KF.initial_cov_v: 0.5
KF.initial_cov_theta: 0.5
KF.initial_cov_grad: 0.05
KF.initial_cov_bias: 0.50

KF.drive_cov_v: 1.0
KF.drive_cov_theta: 1.0
KF.drive_cov_bias: 1.5

KF.observe_cov_p: 2.0
KF.observe_cov_theta: 1.0
